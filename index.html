<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <link rel="stylesheet" href="style.css">
    <title>Document</title>
</head>
<body>
  <h1>Le monde du bibliothéque</h1>
  <main class="container">
 <div class="formGrid1">
<form onsubmit="return validation()" action="validi" method="post" id="myForm">

<div id="body50">
<div class="FORMTAB">
   
   <label for="username"> Titre  :</label><br>
   <input type="text" name="username" id="username">
   <span id="NOMERO"></span>
   
   <br>
   <br>
   <br>


    <label for="username">Auteur  :</label><br>
    <input type="text" name="username" id="PRENO">
    <span id="PRENOMERO"></span>
  
    <br>
    <br>
    <br>

 
    
    <label for="username">Prix  :</label><br>
    <input  type="text" name="username" id="PRIXERO">
    <span id="PRIERO"></span>
     
    <br>
    <br>
    <br>

    <label for="username">Date  :</label><br>
    <input type="date" name="username" id="DATEE">
    <span id="DATEERO"></span>

    <br>
    <br>
    <br>

    <select id="mySelect" >
        <option value="">Sélectionez un langue</option>
        <option value="Français">Français</option>
        <option value="Arabe">Arabe</option>
        <option value="Anglais">Anglais</option>
        
      </select>
      <span id="Mlongue"></span>

      <br>
      <br>
      <br>

  
     <span> <input value="Roman" class="radiobtn" name="radiobtn" type="radio">Roman</span>
     <span> <input value="Essai" class="radiobtn" name="radiobtn" type="radio">Essai</span>
     <span> <input value="Bande-Dessinée" class="radiobtn" name="radiobtn" type="radio">Bande-Dessinée</span>
      <span id="TYPEERO"></span>
  
    <br>
    <br>
    <br>

      <button type="submit" onclick="btn()">Submit</button>

  
      <br>
      <br>
      <br>
  </div>
</div>





 </form>
</div>
 <div class="formGrid2">
  <table id="myTable" border="1">
    <tr>
     <td> Titre </td>
     <td>Auteur</td>
     <td> Prix </td>
     <td> Date </td>
     <td> langue </td>
     <td> Type </td>
     <td> Options </td>
    
   </tr>

  </table>

  <div class="footer">

  </div>
  
 </div>
</main>



<script>
  

            var myInput = document.getElementById('username');
            var mypreno = document.getElementById('PRENO');
            var mydate = document.getElementById('DATEE');
            var myprix = document.getElementById('PRIXERO');
            var mylongue = document.getElementById('mySelect');
            var myType = document.getElementsByClassName('radiobtn');
            var Type_error = document.getElementById('TYPEERO');
            var mytabl = document.getElementById('myTable');


 var myForm = document.getElementById('myForm')
         myForm.addEventListener('submit', function(event){
            event.preventDefault();

            
            var form_valid = true

            var myRegex = /^[a-zA-Z-\s]+$/;
            var myRNUM = /^[0-9-\s]+$/;

        




            
              ///////////////////////   /** titre **/  ///////////////////



      
        if (myInput.value.trim() == "" || (myInput.value.length>30)){
            var NOMER = document.getElementById('NOMERO');
            NOMER.innerHTML = '✖ Requis.';
            NOMER.style.color = 'red';
            form_valid = false;
             

        
        }
        else if (myRegex.test(myInput.value) == false ) {
            var NOMER = document.getElementById('NOMERO');
            NOMER.innerHTML = '✖';
            NOMER.style.color = 'red';
            form_valid = false;

            
        }
        else{
            var NOMER = document.getElementById('NOMERO');
            NOMER.innerHTML = '✔';
            NOMER.style.color = 'green';
        }



           ///////////////////////   / ** Auteur ** /   /////////////////////



    if (mypreno.value.trim() == "" ){
            var NOMER = document.getElementById('PRENOMERO');
            NOMER.innerHTML = '✖ Requis.';
            NOMER.style.color = 'red';
            form_valid = false;
           
        }else if (myRegex.test(mypreno.value) == false ) {
            var NOMER = document.getElementById('PRENOMERO');
            NOMER.innerHTML = '✖';
            NOMER.style.color = 'red';
            form_valid = false;
         
        }
        else{
            var NOMER = document.getElementById('PRENOMERO');
            NOMER.innerHTML = '✔';
            NOMER.style.color = 'green';
        }



        

        ////////////////////    /** prix **/   ///////////////////////

         
        if (isNaN(myprix.value)) {
            var NOMER = document.getElementById('PRIERO');
            NOMER.innerHTML = '✖';
            NOMER.style.color = 'red';
            form_valid = false;

              
        } 
        
        if (!isNaN(myprix.value)) {
            var NOMER = document.getElementById('PRIERO');
            NOMER.innerHTML = '✔';
            NOMER.style.color = 'green';
        }
        if (myprix.value.trim() == ""){
            var NOMER = document.getElementById('PRIERO');
            NOMER.innerHTML = '✖ Requis.';
            NOMER.style.color = 'red';
            form_valid = false;

        }
    
     

    
            //////////////////   /** date **/  ////////////////////




    if (mydate.value.trim() == "" ){
            var NOMER = document.getElementById('DATEERO');
            NOMER.innerHTML = '✖ Requis.';
            NOMER.style.color = 'red';
            form_valid = false;

             
        }else if (myRNUM.test(mydate.value) == false ) {
            var NOMER = document.getElementById('DATEERO');
            NOMER.innerHTML = '✖';
            NOMER.style.color = 'red';
            form_valid = false;

        }
        else{
            var NOMER = document.getElementById('DATEERO');
            NOMER.innerHTML = '✔.';
            NOMER.style.color = 'green';
        }

                        

          /////////////////////  /** lange **/  //////////////////




            if(mylongue.value == ""){
              var NOMER = document.getElementById('Mlongue');
              mylongue.style.borderColor = "red"
              mylongue.nextElementSibling.style.color = "red";
              mylongue.nextElementSibling.innerHTML = "✖ Requis."
              form_valid = false;

            }
            else{
              var NOMER = document.getElementById('Mlongue');
              mylongue.style.borderColor = "green"
              mylongue.nextElementSibling.style.color = "green";
              mylongue.nextElementSibling.innerHTML = "✔"
            }






             ////////////////////  /** type **/  /////////////////////////




               if (!(myType[0].checked || myType[1].checked || myType[2].checked)) {
                var NOMER = document.getElementById('radiobtn');
                form_valid = false;
                 Type_error.innerHTML = '✖';
                 Type_error.style.color = 'red';
               }
                
                 else{
                  var NOMER = document.getElementById('radiobtn');
                  Type_error.innerHTML = '✔';
                  Type_error.style.color = 'green';

                 }


               
          ///////////////////  /** table **/  ////////////////////////
        
                if(form_valid) {
               var NEWROW = mytabl.insertRow(-1);
                var cad1 = NEWROW.insertCell(0);
                var cad2 = NEWROW.insertCell(1);
                var cad3 = NEWROW.insertCell(2);
                var cad4 = NEWROW.insertCell(3);
                var cad5 = NEWROW.insertCell(4);
                var cad6 = NEWROW.insertCell(5);
                var cad7 = NEWROW.insertCell(6);
               
                
                var cadtype='';
                for (i = 0;i<myType.length;i++)
                {
                      if(myType[i].checked)
                      {
                        cadtype = myType[i].value;
                      }
                 }
                
                cad1.innerHTML = myInput.value;
                cad2.innerHTML = mypreno.value;
                cad3.innerHTML = myprix.value;
                cad4.innerHTML = mydate.value;   
                cad5.innerHTML = mylongue.options[mylongue.selectedIndex].value;
                cad6.innerHTML = cadtype;
                cad7.innerHTML = "<input type='submit' onclick='modifier(this)' value='modifier' class='btn'>" + "<input type='submit' value='supprimer' onclick='supprimer(this)' class='btn'>"
            }
   })

  function supprimer(btn){
    var i = btn.parentNode.parentNode.rowIndex;
    mytabl.deleteRow(i);
  }

  function modifier(r) {
     var table=document.getElementsByTagName("table")[0];

     var type=document.getElementsByName("radiobtn");
var i = r.parentNode.parentNode.rowIndex;
var R=table.rows[i];
if(r.value=="modifier"  ){
    document.getElementById("username").value = R.cells[0].innerHTML;
    document.getElementById("PRENO").value= R.cells[1].innerHTML;
    document.getElementById("PRIXERO").value=R.cells[2].innerHTML;
    document.getElementById("DATEE").value= R.cells[3].innerHTML;
    document.getElementById("mySelect").value= R.cells[4].innerHTML;
    
    for(i=0;i<type.length;i++)
    {
        if(R.cells[5].innerHTML==type[i].value)
        {
            type[i].checked=true;
        }
    }
    r.value="save"
    document.getElementById('btn').setAttribute("disabled","true");
} 

else{
    R.cells[0].innerHTML = document.getElementById("username").value;
    R.cells[1].innerHTML =  document.getElementById("PRENO").value;
    R.cells[2].innerHTML=  document.getElementById("PRIXERO").value;
    R.cells[3].innerHTML =   document.getElementById("DATEE").value;
    R.cells[4].innerHTML =  document.getElementById("mySelect").value;
   
    for(i=0;i<type.length;i++)
    {
        if(type[i].checked==true)
        {
            R.cells[5].innerHTML=type[i].value;
        }
    } 
    r.value="modifier"
    document.getElementById('btn').removeAttribute("disabled");
    resetForm();
}
     
}


</script>


</body>
</html>